@model SMSDataContract.Common.Student

@{
    ViewBag.Title = "AddChangesStudent";


    Layout = "~/Views/Shared/_NewLayout.cshtml";
}

<div class="row">
    <div class="col-md-12 col-sm-12">
        <div class="well">
            <div id="stdBasicInfo">

                @using (Html.BeginForm())
                {
                @Html.AntiForgeryToken()
                <div class="row">
                    <div class="col-md-12 col-sm-12">
                        <ol class="breadcrumb">
                            <li class="active">Student</li>
                        </ol>
                        <div class="row well">
                            <div class="form-horizontal">
                                @if (Model.StudentId == 0)
                                    {
                                    <span class="HeadingStyle">Add Student </span>

                                    }
                                    else
                                    {
                                    <span class="HeadingStyle">Update Student</span>
                                    }

                                <hr />
                                @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                                @Html.HiddenFor(model => model.StudentId)

                                <div class="form-group">
                                    @Html.LabelFor(model => model.FirstName, htmlAttributes: new { @class = "control-label col-md-3" })
                                    <div class="col-md-9">
                                        <div class="input-group">
                                            <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
                                            @Html.EditorFor(model => model.FirstName, new { htmlAttributes = new { @class = "form-control", id = "StuFirstName", placeholder = "First Name" } })
                                        </div>

                                        @Html.ValidationMessageFor(model => model.FirstName, "", new { @class = "text-danger" })
                                    </div>
                                </div>

                                <div class="form-group">
                                    @Html.LabelFor(model => model.LastName, htmlAttributes: new { @class = "control-label col-md-3" })
                                    <div class="col-md-9">

                                        <div class="input-group">
                                            <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
                                            @Html.EditorFor(model => model.LastName, new { htmlAttributes = new { @class = "form-control", id = "StuLastName", placeholder = "Last Name" } })
                                        </div>
                                        @Html.ValidationMessageFor(model => model.LastName, "", new { @class = "text-danger" })
                                    </div>
                                </div>

                                <div class="form-group">
                                    @*@Html.LabelFor(model => model.DOB, htmlAttributes: new { @class = "control-label col-md-3" })*@
                                    @Html.Label("Date of Birth", htmlAttributes: new { @class = "control-label col-md-3" })
                                    <div class="col-md-9">
                                        <div class="input-group">
                                            <span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>
                                            @Html.TextBoxFor(model => model.DOB, new { @class = "form-control", type = "datetime", id = "DateOfBirth", placeholder = "02/09/1992" })
                                        </div>

                                        @Html.ValidationMessageFor(model => model.DOB, "", new { @class = "text-danger" })
                                    </div>
                                </div>
                                @*<input type="datetime" />*@

                                <div class="form-group">
                                    @Html.LabelFor(model => model.Religion, htmlAttributes: new { @class = "control-label col-md-3" })
                                    <div class="col-md-9">
                                        <div class="input-group">
                                            <span class="input-group-addon"><i class="glyphicon glyphicon-book"></i></span>
                                            @Html.EditorFor(model => model.Religion, new { htmlAttributes = new { @class = "form-control", id = "StuReligion", placeholder = "Religion" } })
                                        </div>

                                        @Html.ValidationMessageFor(model => model.Religion, "", new { @class = "text-danger" })
                                    </div>
                                </div>

                                <div class="form-group">
                                    <div class="col-md-3 control-label"><label> Acadmic Class</label> </div>

                                    <div class="col-md-9">
                                        <div class="input-group">
                                            <span class="input-group-addon"><i class="glyphicon glyphicon-level-up"></i></span>
                                            @{Html.RenderPartial("../DropDownLists/DDLClass");}
                                        </div>
                                        @Html.ValidationMessageFor(model => model.AcadmicClassId, "", new { @class = "text-danger" })
                                    </div>
                                </div>
                                <div class="form-group">

                                    @Html.LabelFor(model => model.CNIC, htmlAttributes: new { @class = "control-label col-md-3" })
                                    <div class="col-md-9">
                                        <div class="input-group">
                                            <span class="input-group-addon"><i class="glyphicon glyphicon-phone"></i></span>
                                            @Html.EditorFor(model => model.CNIC, new { htmlAttributes = new { @class = "form-control", id = "StuCNIC", placeholder = "CNIC Number" } })
                                        </div>
                                        @Html.ValidationMessageFor(model => model.CNIC, "", new { @class = "text-danger" })
                                    </div>
                                </div>
                                <div id="dvSibling" style="text-align: center; margin-top: 10px; margin-left:42%;">
                                    <span id="siblinMsg" class="error" style="display:none;"></span>
                                </div>
                                <div class="form-group">
                                    <div class="col-md-3 control-label"><label>No.Sibling</label> </div>

                                    <div class="col-md-9">
                                        <div class="input-group">
                                            <span class="input-group-addon"><i class="glyphicon glyphicon-level-up"></i></span>
                                            @{Html.RenderPartial("../DropDownLists/DDLSibling");}
                                        </div>
                                        @Html.ValidationMessageFor(model => model.NoOfSibling, "", new { @class = "text-danger" })
                                    </div>
                                </div>
                                <div id="dvCSibling" style="text-align: center; margin-top: 10px; margin-left:42%;">
                                    <span id="CsiblinMsg" class="error" style="display:none;"></span>
                                </div>
                                <div class="form-group">

                                    <label class="col-md-3 control-label"> Current School sibling</label>

                                    <div class="col-md-9">
                                        <div class="input-group">
                                            <span class="input-group-addon"><i class="glyphicon glyphicon-barcode"></i></span>
                                            @{Html.RenderPartial("../DropDownLists/DDLCurrentSibling");}
                                        </div>
                                        @Html.ValidationMessageFor(model => model.NoOfSiblingCurrentSchool, "", new { @class = "text-danger" })
                                    </div>
                                </div>
                                <hr />
                                <div class="form-group">
                                    <div class="col-md-12">
                                        <div class="row">
                                            <div class="col-md-9">
                                                @if (Model.StudentId == 0)
                                                    {
                                                    <input type="submit" value="Add" id="AddStudent" style="background-color:#fab625;color:white;" class="btn pull-right" />

                                                    }
                                                    else
                                                    {
                                                    <input type="submit" value="Update" id="UpdateStudent" style="background-color:#fab625; color:white;" class="btn pull-right" />

                                                    }
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                }

                @section Scripts {

                    @Scripts.Render("~/bundles/jqueryval")
                    @Scripts.Render("~/bundles/bootstrap")
                    <script type="text/javascript">
                        $(document).ready(function () {
                            $(function () {
                                $('#DateOfBirth').datetimepicker();
                            });
                            $("#AddStudent").click(function (e) {
                                debugger;
                                if ($('#ddlSibling').val() == '') {


                                    $("#siblinMsg").show();
                                    $("#siblinMsg").text("Please Select Sibling");
                                    e.preventDefault();
                                    return;
                                }
                                if ($('#ddlCurrentSibling').val() == '') {
                                    $("#CsiblinMsg").show();
                                    $("#CsiblinMsg").text("Please Select Sibling");
                                    e.preventDefault();
                                    return;
                                }

                            });
                            $("#UpdateStudent").click(function (e) {

                                if ($('#ddlSibling').val() == '') {
                                    $("#siblinMsg").show();
                                    $("#siblinMsg").text("Please Select Sibling");
                                    e.preventDefault();
                                    return false;

                                }
                                if ($('#ddlCurrentSibling').val() == '') {

                                    $("#CsiblinMsg").show();
                                    $("#CsiblinMsg").text("Please Select Sibling");
                                    e.preventDefault();
                                    return false;
                                }
                            });
                            $("#ddlSibling").change(function () {

                                var selectedSibling = $("#ddlSibling").val();
                                if (selectedSibling != '') {
                                    $("#siblinMsg").hide();
                                }

                            });
                            $("#ddlCurrentSibling").change(function () {

                                var selectedSibling = $("#ddlCurrentSibling").val();
                                if (selectedSibling != '') {
                                    $("#CsiblinMsg").hide();
                                }

                            });

                            // set dropdown selected value
                            if ('@Model.StudentId' > 0) {
                                $('#AcadmicClassId option[value="@Model.AcadmicClassId"]').attr("selected", true);
                                $('#ddlSibling option[value="@Model.NoOfSibling"]').attr("selected", true);
                                $('#ddlCurrentSibling option[value="@Model.NoOfSiblingCurrentSchool"]').attr("selected", true);
                            }
                            else {
                                $('#AcadmicClassId option[value=""]').attr("selected", true);
                                $('#ddlSibling option[value=""]').attr("selected", true);
                                $('#ddlCurrentSibling option[value=""]').attr("selected", true);
                            }
                        });

                    </script>
                }
            </div>
        </div>
    </div>
</div>