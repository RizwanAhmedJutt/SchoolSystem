@using PagedList;
@using PagedList.Mvc;
@model IEnumerable<SMSDataContract.Accounts.DailyAssessmentSubType>
    @{

        Layout = "~/Views/Shared/_StudentLayout.cshtml";
    }
    <div class="row">
        <div class="col-md-12 col-sm-12">

            <div style="clear:left"></div>
            <div class="well">
               

                <br />
                <div class="row">
                    <span class="HeadingStyle">General Assessment Detail</span>
                    <table class="table  table-bordered table-striped table-responsive table-hover">
                        <tr class="action info">
                            <th>
                                @Html.DisplayNameFor(model => model.First().AcadmicClassName)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.First().StudentName)
                            </th>

                            <th>
                                @Html.DisplayNameFor(model => model.First().ParentAssementName)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.First().AssessmentSubTypeName)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.First().SelectedEvaluation)
                            </th>
                          

                            <th>
                                @Html.DisplayNameFor(model => model.First().Concequence)
                            </th>
                            <th>

                                @Html.DisplayNameFor(model => model.First().CreateDate)

                            </th>
                           

                        </tr>

                        @foreach (var item in Model)
                        {
                            <tr>
                                <td>
                                    @Html.DisplayFor(modelItem => item.AcadmicClassName)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.StudentName)
                                </td>

                                <td>
                                    @Html.DisplayFor(modelItem => item.ParentAssementName)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.AssessmentSubTypeName)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.SelectedEvaluation)
                                </td>
                               
                                <td>
                                    @Html.DisplayFor(modelItem => item.Concequence)
                                </td>
                                <td>
                                    @Html.DisplayName(item.CreateDate.ToShortDateString())
                                </td>
                               

                            </tr>
                        }

                    </table>

                </div>
            </div>
        </div>
    </div>
    @section Scripts {
        @Scripts.Render("~/bundles/jqueryval")
        @*@Scripts.Render("~/bundles/bootstrap")*@
        @Scripts.Render("~/bundles/jqueryui")
        @Styles.Render("~/Content/JqueryUicss")
        <script type="text/javascript">
            $(document).ready(function () {
                // Set Query String Parameter
                if ('@Request.QueryString["AcadmicClassId"]' != null) {

                    $('#ddlAcadmicClass option[value="@Request.QueryString["AcadmicClassId"]"]').attr("selected", true);

                }
                else {
                    $('#ddlAcadmicClass option[value=""]').attr("selected", true);
                }
                if ('@Request.QueryString["StudentId"]' != null) {

                    $('#ddlStudent option[value="@Request.QueryString["StudentId"]"]').attr("selected", true);

                }
                else {
                    $('#ddlStudent option[value=""]').attr("selected", true);
                }
                if ('@Request.QueryString["CreateDate"]' != null) {
                    debugger;
                    $("#setDate").val('@Request.QueryString["CreateDate"]');

                }
                else {
                    $("#setDate").val() = "";
                }
                //change event for acadmic class
                $("#ddlAcadmicClass").change(function () {

                    var getAcadmicClass = $("#ddlAcadmicClass :selected").val();
                    var model = { AcadmicClassId: getAcadmicClass };
                    if (getAcadmicClass != '') {

                        $(this).removeAttr("style");
                        Url = "/Course/DDLStudent";

                        // Fill Student Dropdown
                        $.get(Url, model)
                        .done(function (stdhtml) {

                            $("#dvDDLStudent").html(stdhtml);

                        })
                        .fail(function (ex1, ex2) {
                            alert("Can't get Student DDL");
                        })
                    }

                });


                $('body').on("change", "#ddlStudent", function () {

                    if ($("#ddlStudent").val() != "") {
                        $("#StudentMsg").text("");
                        $("#StudentMsg").hide();
                    }

                });
                $('#setDate').datepicker();
                $("#setDate").change(function () {
                    $(this).removeAttr("style");


                });
                $("#btnSearch").click(function (e) {
                    debugger;
                    e.preventDefault();

                    if ($("#ddlAcadmicClass").val() == '') {


                        $("#ddlAcadmicClass").css("border", "1px solid red");

                    }
                    else if ($("#ddlStudent").val() == '') {

                        $("#ddlStudent").css("border", "1px solid red");
                    }
                    else if ($("#setDate").val() === '') {

                        $("#setDate").css("border", "1px solid red");
                    }
                    else {
                        $("form").submit();
                    }


                });
            });

        </script>
    }

